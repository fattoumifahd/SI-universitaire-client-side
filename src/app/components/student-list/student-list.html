<!-- src/app/components/student-list/student-list.component.html -->

<div class="container">
  <div class="header">
    <h1>Student Management</h1>
    <a routerLink="/register" class="btn btn-primary">
      <span class="icon">+</span> Add New Student
    </a>
  </div>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="alert alert-success">
    âœ“ {{ successMessage }}
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-error">
    âœ— {{ errorMessage }}
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>Loading students...</p>
  </div>

  <!-- No Students -->
  <div *ngIf="!isLoading && students.length === 0" class="empty-state">
    <div class="empty-icon">ğŸ“š</div>
    <h3>No Students Found</h3>
    <p>Start by adding your first student to the system</p>
    <a routerLink="/register" class="btn btn-primary">
      <span class="icon">+</span> Add Your First Student
    </a>
  </div>

  <!-- Student Cards Grid (Mobile/Tablet View) -->
  <!-- <div *ngIf="!isLoading && students.length > 0" class="cards-container mobile-view">
    <div *ngFor="let student of students" class="student-card">
      <div class="card-header-section">
        <div class="student-avatar">
          {{ student.firstName }}{{ student.lastName}}
        </div>
        <div class="card-info">
          <h3>{{ student.firstName }} {{ student.lastName }}</h3>
          <p class="username">@{{ student.username }}</p>
          <span class="badge">{{ student.field?.replace('_', ' ') }}</span>
        </div>
      </div>

      <div class="card-details">

        <div class="detail-item">
          <span class="detail-label">Birth Date:</span>
          <span class="detail-value">{{ formatDate(student.birthDate) }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Current Semester:</span>
          <span class="detail-value semester-badge">Semester {{ student.currentSemester }}</span>
        </div>
      </div>

      <div class="card-actions">
        <a [routerLink]="['/student', student.id]" class="btn-action btn-view">
          <span class="action-icon">ğŸ‘ï¸</span>
          <span class="action-text">View Details</span>
        </a>
        <a [routerLink]="['/student/edit', student.id]" class="btn-action btn-edit">
          <span class="action-icon">âœï¸</span>
          <span class="action-text">Edit</span>
        </a>
        <button (click)="confirmDelete(student.id!)" class="btn-action btn-delete">
          <span class="action-icon">ğŸ—‘ï¸</span>
          <span class="action-text">Delete</span>
        </button>
      </div>
    </div>
  </div> -->

  <!-- Student Table (Desktop View) -->
  <div *ngIf="!isLoading && students.length > 0" class="table-container desktop-view">
    <table class="student-table">
      <thead>
        <tr>
          <th>Avatar</th>
          <th>Full Name</th>
          <th>Username</th>
          <th>Birth Date</th>
          <th>Field of Study</th>
          <th>Semester</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let student of students" class="table-row">
          <td>
            <div class="table-avatar">
              {{ student.firstName }}{{ student.lastName }}
            </div>
          </td>
          <td class="name-cell">
            <strong>{{ student.firstName }} {{ student.lastName }}</strong>
          </td>
          <td class="username-cell">@{{ student.username }}</td>
          <td>{{ formatDate(student.birthDate) }}</td>
          <td>
            <span class="badge">{{ student.field?.replace('_', ' ') }}</span>
          </td>
          <td>
            <span class="semester-badge">Semester {{ student.currentSemester }}</span>
          </td>
          <td class="actions-cell">
            <div class="action-buttons">
              <a
                [routerLink]="['/student', student.id]"
                class="btn-icon btn-view"
                title="View Details">
                <span class="icon-text">ğŸ‘ï¸</span>
                <span class="tooltip">View</span>
              </a>
              <a
                [routerLink]="['/student/edit', student.id]"
                class="btn-icon btn-edit"
                title="Edit Student">
                <span class="icon-text">âœï¸</span>
                <span class="tooltip">Edit</span>
              </a>
              <button
                (click)="confirmDelete(student.id!)"
                class="btn-icon btn-delete"
                title="Delete Student">
                <span class="icon-text">ğŸ—‘ï¸</span>
                <span class="tooltip">Delete</span>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Students Count -->
    <div class="table-footer">
      <p class="student-count">
        Showing <strong>{{ students.length }}</strong> student{{ students.length !== 1 ? 's' : '' }}
      </p>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div *ngIf="studentToDelete" class="modal-overlay" (click)="cancelDelete()">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-icon">âš ï¸</div>
      <h3>Confirm Delete</h3>
      <p>Are you sure you want to delete this student?</p>
      <p class="warning-text">This action cannot be undone and will permanently remove all student data.</p>
      <div class="modal-actions">
        <button (click)="cancelDelete()" class="btn btn-secondary">
          Cancel
        </button>
        <button (click)="deleteStudent(studentToDelete)" class="btn btn-danger">
          Yes, Delete Student
        </button>
      </div>
    </div>
  </div>
</div>
